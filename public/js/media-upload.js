document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("gallery-upload"),n=document.querySelector('meta[name="csrf-token"]'),t=document.querySelector('input[name="article_id"]');e&&n&&t?(e.addEventListener("change",(function(e){var r=e.target.files;if(0!==r.length){var o=new FormData;o.append("_token",n.content),o.append("article_id",t.value);for(var a=0;a<r.length;a++)o.append("file",r[a]);fetch("/admin/articles/upload-media",{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){e.location?location.reload():(console.error("Erreur serveur :",e),alert("❌ Erreur : "+(e.error||"Upload échoué.")))})).catch((function(e){console.error("Upload failed:",e),alert("❌ Une erreur est survenue lors du téléversement.")}))}})),document.querySelectorAll(".delete-media").forEach((function(e){e.addEventListener("click",(function(){var e=this.dataset.id;confirm("Voulez-vous vraiment supprimer cette image ?")&&fetch("/admin/articles/media/".concat(e),{method:"DELETE",headers:{"X-CSRF-TOKEN":n.content,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success?location.reload():alert("Erreur : "+e.error)})).catch((function(e){return console.error("Suppression échouée:",e)}))}))}))):console.warn("⚠️ Certains éléments requis pour l'upload des images ne sont pas trouvés !")}));